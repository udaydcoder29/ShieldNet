<!DOCTYPE html>
<html>
<head>
    <title>ShieldNet - Login</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(rgba(15,23,42,0.45), rgba(30,41,59,0.45)),
                        url("background.png") no-repeat center center;
            background-size: 110%;
            color: white;
        }

        .main-logo {
            width: 300px;
            margin-bottom: 20px;
        }

        .container {
            width: 950px;
            display: flex;
            justify-content: space-between;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.6);
        }

        .left, .right {
            width: 50%;
            padding: 40px;
        }

        .left {
            border-right: 1px solid rgba(255,255,255,0.1);
        }

        h2 {
            margin-bottom: 20px;
            color: #22c55e;
        }

        input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
            border: none;
            outline: none;
        }

        .btn {
            width: 100%;
            padding: 12px;
            margin-top: 10px;
            border-radius: 8px;
            border: none;
            font-weight: bold;
            cursor: pointer;
        }

        .btn-signup { background: #22c55e; color: white; }
        .btn-login { background: #3b82f6; color: white; }

        .divider-text {
            text-align: center;
            margin: 15px 0;
            color: #94a3b8;
        }

        #recaptcha-container {
            margin-top: 10px;
        }

        /* ================= RESPONSIVE DESIGN ================= */

/* Tablet */
@media (max-width: 1199px) {

    .sidebar {
        width: 200px;
    }

    .post-card,
    .create-post {
        width: 90%;
    }

    .right-panel {
        display: none; /* hide stats on tablet */
    }
}

/* Mobile */
@media (max-width: 768px) {

    .app,
    .main {
        flex-direction: column;
    }

    .sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid #334155;
        display: flex;
        flex-direction: row;
        overflow-x: auto;
    }

    .sidebar a {
        flex: 1;
        text-align: center;
        font-size: 14px;
    }

    .feed {
        align-items: center;
        padding: 10px;
    }

    .post-card {
        width: 95%;
    }

    .floating-btn {
        bottom: 15px;
        right: 15px;
        width: 50px;
        height: 50px;
        font-size: 22px;
    }

    .chat-container,
    .chat-area {
        height: auto;
    }

    .chat-box {
        padding: 10px;
    }

    .bubble {
        max-width: 85%;
        font-size: 13px;
    }

    input, textarea {
        font-size: 14px;
    }
}

    </style>
</head>

<body>

<img src="logo.png" class="main-logo">

<div class="container">

    <!-- SIGN UP -->
    <div class="left">

        <h2>Create Account</h2>

        <input type="email" id="signupEmail" placeholder="Enter Email">
        <input type="password" id="signupPassword" placeholder="Create Password">

        <button class="btn btn-signup" id="signupButton">
            Create Account
        </button>

        <div class="divider-text">OR</div>

        <!-- PHONE AUTH -->
        <input type="text" id="phoneNumber" placeholder="+91XXXXXXXXXX">

        <button class="btn btn-login" id="sendOtpButton">
            Send OTP
        </button>

        <input type="text" id="otpCode" placeholder="Enter OTP">

        <button class="btn btn-signup" id="verifyOtpButton">
            Verify OTP
        </button>

        <div id="recaptcha-container"></div>

    </div>

    <!-- LOGIN -->
    <div class="right">

        <h2>Existing User</h2>

        <input type="email" id="loginEmail" placeholder="Enter Email">
        <input type="password" id="loginPassword" placeholder="Enter Password">

        <button class="btn btn-login" id="loginButton">
            Sign In
        </button>

    </div>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, 
         signInWithPhoneNumber, RecaptchaVerifier } 
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyAEVc0RJ3doiWWDk6XIMCubF47fMKldkuw",
  authDomain: "shieldnet-web-app.firebaseapp.com",
  projectId: "shieldnet-web-app",
  storageBucket: "shieldnet-web-app.firebasestorage.app",
  messagingSenderId: "831990307810",
  appId: "1:831990307810:web:0a559e4c315fc043b037bb"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// EMAIL SIGN UP
document.getElementById("signupButton").addEventListener("click", () => {
    const email = signupEmail.value;
    const password = signupPassword.value;

    createUserWithEmailAndPassword(auth, email, password)
        .then(() => alert("Account Created Successfully!"))
        .catch(error => alert(error.message));
});

// EMAIL LOGIN
document.getElementById("loginButton").addEventListener("click", () => {
    const email = loginEmail.value;
    const password = loginPassword.value;

    signInWithEmailAndPassword(auth, email, password)
        .then(() => {
            alert("Login Successful!");
            window.location.href = "dashboard.html";
        })
        .catch(error => alert(error.message));
});

// PHONE AUTH SETUP
window.recaptchaVerifier = new RecaptchaVerifier(auth, 'recaptcha-container', {
    size: 'normal',
});

const appVerifier = window.recaptchaVerifier;

// SEND OTP
document.getElementById("sendOtpButton").addEventListener("click", () => {
    const phoneNumber = document.getElementById("phoneNumber").value;

    signInWithPhoneNumber(auth, phoneNumber, appVerifier)
        .then((confirmationResult) => {
            window.confirmationResult = confirmationResult;
            alert("OTP Sent!");
        })
        .catch(error => alert(error.message));
});

// VERIFY OTP
document.getElementById("verifyOtpButton").addEventListener("click", () => {
    const code = document.getElementById("otpCode").value;

    confirmationResult.confirm(code)
        .then(() => {
            alert("Phone Authentication Successful!");
            window.location.href = "dashboard.html";
        })
        .catch(error => alert("Invalid OTP"));
});

</script>

</body>
</html>
